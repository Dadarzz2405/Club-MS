{% extends "base.html" %}

{% block title %}Division Management — Rohis{% endblock %}

{% block content %}
<div class="mt-4">
    <h2>Division Management</h2>

    <form method="POST" class="mb-4">
        <label>Users (hold Ctrl/Cmd to select multiple)</label><br>
        <select name="user_ids" multiple required class="form-select">
            {% for u in users %}
                <option value="{{ u.id }}">{{ u.name }} ({{ u.role }})</option>
            {% endfor %}
        </select>

        <br><br>

        <label>Division</label><br>
        <select name="division_id" required class="form-select">
            {% for div in divisions %}
                <option value="{{ div.id }}">{{ div.name }}</option>
            {% endfor %}
        </select>

        <br><br>

        <label>
            <input type="checkbox" name="can_mark_attendance">
            Only one selected user will have permission to mark attendance
        </label>

        <br><br>

        <button type="submit" class="btn btn-primary">Assign</button>
    </form>

    <hr>

    <h4>Current Users</h4>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Name</th>
                <th>Role</th>
                <th>Division</th>
                <th>Can Mark Attendance</th>
            </tr>
        </thead>
        <tbody>
            {% for u in users %}
            <tr>
                <td>{{ u.name }}</td>
                <td>{{ u.role }}</td>
                <td>{{ u.division.name if u.division else '-' }}</td>
                <td>{{ '✅' if u.can_mark_attendance else '❌' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
